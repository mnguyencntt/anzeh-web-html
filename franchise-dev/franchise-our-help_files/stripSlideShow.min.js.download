"use strict";define("stripSlideShow/common/SlideShowSantaTypes",["lodash","react","santaProps"],function(t,e,i){var o=i.createSantaType,s=["wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShowSlide"],n=o(e.PropTypes.array,function(e,i){var o=e.siteAPI.getDisplayedDAL(),n=e.siteAPI.getPointers(),r=n.components.getPage(i.rootId,e.siteData.getViewMode()),a=n.components.getComponent(i.structure.id,r),p=n.components.getChildren(a);return t.transform(p,function(e,i,r){var a=n.getInnerPointer(i,"componentType"),p=o.get(a);t.includes(s,p)&&e.push(r)},[])}),r=o(e.PropTypes.bool,function(t,e){return!i.Types.isZoomOpened.fetch(t,e)&&i.Types.RenderFlags.isPlayingAllowed.fetch(t,e)&&!!i.Types.Component.compProp.fetch(t,e).autoPlay&&n.fetch(t,e).length>1}),a=o(e.PropTypes.func,function(e,o){return"undefined"!=typeof window?function(t,s){var n=function(){var s=i.Types.isZoomOpened.fetch(e,o);i.Types.viewportStates.fetch(e,o).in&&!s&&t()};return setInterval(n,s)}:t.noop}),p=o(e.PropTypes.func,function(){return"undefined"!=typeof window?function(t){clearInterval(t)}:t.noop});return{canAutoPlay:r,slidesIndexes:n,startAutoPlayInViewport:a,stopAutoPlayInViewport:p}}),define("stripSlideShow/common/boxSlideShowAutoPlay",["santaProps","stripSlideShow/common/SlideShowSantaTypes"],function(t,e){return{propTypes:{id:t.Types.Component.id.isRequired,compProp:t.Types.Component.compProp.isRequired,startAutoPlayInViewport:e.startAutoPlayInViewport.isRequired,stopAutoPlayInViewport:e.stopAutoPlayInViewport.isRequired},toggleAutoPlay:function(){this.setState({autoPlay:!this.state.autoPlay},this.updateAutoPlayState)},updateAutoPlayState:function(){if(this.props.stopAutoPlayInViewport(this.timeoutId),this.state.autoPlay){var t=1e3*this.props.compProp.autoPlayInterval;this.timeoutId=this.props.startAutoPlayInViewport(this.clickMoveToNextSlide,t)}},componentDidMount:function(){this.updateAutoPlayState()},componentWillUnmount:function(){this.props.stopAutoPlayInViewport(this.timeoutId)}}}),define("stripSlideShow/common/slideNavigationMixin",["react","lodash","core","santaProps","stripSlideShow/common/boxSlideShowAutoPlay","stripSlideShow/common/SlideShowSantaTypes"],function(t,e,i,o,s,n){function r(t,e){var i=t.selectedButtonSizeRatio||1;return Math.floor(e*i)}function a(t){return{currentIndex:e.get(t,"currentIndex",0),isPlaying:e.get(t,"autoPlay",!1)}}var p=i.compMixins,l={center:"center",left:"flex-start",right:"flex-end"},h=i.componentUtils.boxSlideShowCommon;return{propTypes:{triggerFakeModeChange:o.Types.Modes.triggerFakeModeChange.isRequired,compProp:o.Types.Component.compProp.isRequired,canAutoPlay:n.canAutoPlay.isRequired,slidesIndexes:n.slidesIndexes.isRequired},mixins:[p.skinBasedComp,p.timeoutsMixin,s,p.animationsMixin,p.compStateMixin(a)],getInitialState:function(){return this.reverse=!1,this.isDirectionLeftToRight="LTR"===this.props.compProp.direction,e.assign(a(null,this.props.compProp),{isInTransition:!1,autoPlay:this.props.canAutoPlay})},setCurrentSlideAndRegisterRelayout:function(t,i,o,s){if(!this.state.isInTransition||i){this.registerReLayout();var n=e.isFunction(s)?s:e.noop;this.setState({currentIndex:t,isInTransition:o},function(){this.props.triggerFakeModeChange(this.props.currentUrlPageId,this.props.id),n(),this.handleAction("change")})}},componentWillReceiveProps:function(t){if(this.props.compProp.direction!==t.compProp.direction&&(this.isDirectionLeftToRight="LTR"===t.compProp.direction),t.children){var i=this.props.slidesIndexes.length,o=t.slidesIndexes.length;if(o<i){var s=e.map(t.children,"ref"),n=e.map(this.props.children,"ref"),r=n[this.state.currentIndex],a=e.difference(n,s),p=e.indexOf(n,a[0]),l=this.state.currentIndex>0?this.state.currentIndex-1:0;e.includes(s,r)?l=s.indexOf(r):l>=o&&(l=o-1);var h=this.state.currentIndex>=o;if(this.state.currentIndex!==l){var d=this.state.currentIndex===p;this.setCurrentSlideAndRegisterRelayout(l,h,d)}}t.canAutoPlay!==this.state.autoPlay&&this.setState({autoPlay:t.canAutoPlay},this.setAutoPlayStateCallBack)}},setAutoPlayStateCallBack:function(){this.handleAction(this.state.autoPlay?"autoplayOn":"autoplayOff"),this.updateAutoPlayState()},createDotsNavigationButtons:function(){var i=this.getSkinExports(),o=[];return e.forEach(this.props.slidesIndexes,function(e){var s=this.state.currentIndex===e,n=s?r(i,this.props.compProp.navigationDotsSize):this.props.compProp.navigationDotsSize,a={className:this.classSet({"navigation-dot":!0,selected:s})+" reset-button",style:{width:n,height:n,marginRight:this.props.compProp.navigationDotsGap/2,marginLeft:this.props.compProp.navigationDotsGap/2},"aria-label":"Go to slide "+(e+1)};o.push(t.DOM.li({className:this.classSet({"navigation-dot-wrapper":!0}),onClick:this.moveToSlide.bind(this,e),children:t.DOM.button(a)}))}.bind(this)),o},getDotsNavigationWrapperStyle:function(){var t=r(this.getSkinExports(),this.props.compProp.navigationDotsSize);return{bottom:this.props.compProp.navigationDotsMargin-.5*t,justifyContent:this.getDotsAlignment(),WebkitJustifyContent:this.getDotsAlignment()}},moveNextSlide:function(t){if(!this.state.isInTransition){this.reverse=!1;var e=h.getNextSlideIndex(this.props.slidesIndexes,this.state.currentIndex);this.setCurrentSlideAndRegisterRelayout(e,!1,!0,t)}},movePreviousSlide:function(t){if(!this.state.isInTransition){this.reverse=!0;var e=h.getPrevSlideIndex(this.props.slidesIndexes,this.state.currentIndex);this.setCurrentSlideAndRegisterRelayout(e,!1,!0,t)}},isSlideDirectionReversed:function(t){var e=this.state.currentIndex;return t>e?0===e&&t===this.props.slidesIndexes.length-1:!(0===t&&e===this.props.slidesIndexes.length-1)},moveToSlide:function(t,i){t===this.state.currentIndex||this.state.isInTransition?e.isFunction(i)&&i():e.isNumber(t)&&t>=0&&t<this.props.slidesIndexes.length&&(this.reverse=this.isSlideDirectionReversed(t),this.setCurrentSlideAndRegisterRelayout(t,!1,!0,i))},onMouseEnter:function(){this.state.autoPlay&&this.props.compProp.pauseAutoPlayOnMouseOver&&this.setState({autoPlay:!1},this.updateAutoPlayState)},onMouseLeave:function(){this.props.compProp.pauseAutoPlayOnMouseOver&&this.setState({autoPlay:this.props.canAutoPlay},this.updateAutoPlayState)},getTransitionDuration:function(){return"NoTransition"===this.props.compProp.transition?0:this.props.compProp.transDuration},transitionCallback:function(t){this.setState({isInTransition:!1},t)},getArrowButtonStyle:function(t){var i=this.props.compProp,o=this.getSkinExports().arrowWidthToHeightRatio||1,s=i.navigationButtonSize/o,n=i.navigationButtonMargin-.5*s,r=t?{left:n}:{right:n};return e.assign(r,{width:s})},getNavigationArrowsStyle:function(){var t=this.getSkinExports().arrowWidthToSizeRatio||1;return{top:"calc(50% - "+this.props.compProp.navigationButtonSize*t+"px)"}},getDotsAlignment:function(){return l[this.props.compProp.navigationDotsAlignment]},clickMoveToNextSlide:function(){this.moveNextSlide()},clickMoveToPreviousSlide:function(){this.movePreviousSlide()},getSlideToRender:function(){return e.at(this.props.children,this.props.slidesIndexes)[this.state.currentIndex]},getShowOnAllSlidesComponents:function(){return e.reject(this.props.children,function(t,i){return e.includes(this.props.slidesIndexes,i)}.bind(this))},keyboardInteractionHandler:function(t){var i=["ArrowRight","ArrowLeft","Home","End"];e.includes(i,t.key)&&(t.preventDefault(),this.refs.inlineContentParent.contains(window.document.activeElement)&&this.refs.inlineContentParent.focus()),"ArrowRight"===t.key&&this.moveNextSlide(),"ArrowLeft"===t.key&&this.movePreviousSlide(),"Home"===t.key&&this.moveToSlide(0),"End"===t.key&&this.moveToSlide(this.getSlidesFromChildren(this.props.children).length-1)},stopAutoPlay:function(){this.setState({autoPlay:!1})},resumeAutoPlay:function(){this.setState({autoPlay:this.props.canAutoPlay})}}}),define("stripSlideShow/common/stripSlideShow",["react","lodash","core","santaProps","stripSlideShow/common/slideNavigationMixin"],function(t,e,i,o,s){var n=t.createFactory(i.wixTransitionGroup);return{displayName:"stripSlideShow",mixins:[s],propTypes:{animations:o.Types.animations,isSiteBusy:o.Types.isSiteBusy,updateColorInfo:o.Types.VerticalAnchorsMenu.updateInformation.isRequired,compProp:o.Types.Component.compProp.isRequired,getScreenWidth:o.Types.getScreenWidth.isRequired},statics:{useSantaTypes:!0,compSpecificIsDomOnly:function(t,e){return e.style.height===t.style.height},behaviors:{nextSlide:{methodName:"moveNextSlide",params:[]},prevSlide:{methodName:"movePreviousSlide",params:[]},moveToSlide:{methodName:"moveToSlide",params:["slide"]}}},getTransitionParams:function(){return{width:this.props.getScreenWidth()}},getSkinProperties:function(){var e=this.getSlideToRender();return{"":{role:"region","aria-label":"Slideshow",onSwipeLeft:this.clickMoveToNextSlide,onSwipeRight:this.clickMoveToPreviousSlide,onKeyDown:this.keyboardInteractionHandler,onFocus:this.stopAutoPlay,onBlur:this.resumeAutoPlay},inlineContentParent:{style:{overflow:this.props.compProp.shouldHideOverflowContent?"hidden":"visible"},tabIndex:-1},inlineContent:{"aria-live":"polite",parentConst:n,isSiteBusy:this.props.isSiteBusy,transition:this.props.compProp.transition,transitionDuration:this.getTransitionDuration(),transitionCallback:this.transitionCallback,animations:this.props.animations,reverse:this.isDirectionLeftToRight?!this.reverse:this.reverse,getTransitionParams:this.getTransitionParams,children:e&&[t.cloneElement(e,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,flexibleBoxHeight:this.props.compProp.flexibleBoxHeight,shouldHideOverflowContent:this.props.compProp.shouldHideOverflowContent,parentId:this.props.id,minHeight:this.props.structure.layout.height})]},shownOnAllSlides:{children:this.getShowOnAllSlidesComponents()},navigationArrows:{"data-show-navigation-arrows":this.props.compProp.showNavigationButton,"data-navigation-button-margin":this.props.compProp.navigationButtonMargin,style:this.getNavigationArrowsStyle()},dotsMenuWrapper:{"data-show-navigation-dots":this.props.compProp.showNavigationDots,children:this.createDotsNavigationButtons(),style:this.getDotsNavigationWrapperStyle()},prevButton:{onClick:this.clickMoveToPreviousSlide,style:this.getArrowButtonStyle(!0),className:"reset-button"},nextButton:{onClick:this.clickMoveToNextSlide,style:this.getArrowButtonStyle(!1),className:"reset-button"}}}}}),define("stripSlideShow/common/boxSlideShow",["react","lodash","core","santaProps","stripSlideShow/common/slideNavigationMixin"],function(t,e,i,o,s){var n=t.createFactory(i.wixTransitionGroup);return{displayName:"boxSlideShow",mixins:[s],propTypes:{animations:o.Types.animations,updateColorInfo:o.Types.VerticalAnchorsMenu.updateInformation.isRequired,isSiteBusy:o.Types.isSiteBusy,compProp:o.Types.Component.compProp.isRequired,styleId:o.Types.Component.styleId.isRequired,id:o.Types.Component.id.isRequired,structure:o.Types.Component.structure.isRequired},statics:{useSantaTypes:!0,compSpecificIsDomOnly:function(t,e){return e.style.height===t.style.height},behaviors:{nextSlide:{methodName:"moveNextSlide",params:[]},prevSlide:{methodName:"movePreviousSlide",params:[]},moveToSlide:{methodName:"moveToSlide",params:["slide"]}}},getSkinProperties:function(){return{"":{"data-shouldhideoverflowcontent":this.props.compProp.shouldHideOverflowContent,onSwipeLeft:this.clickMoveToNextSlide,onSwipeRight:this.clickMoveToPreviousSlide},inlineContent:{isSiteBusy:this.props.isSiteBusy,parentConst:n,transition:this.props.compProp.transition,transitionDuration:this.getTransitionDuration(),transitionCallback:this.transitionCallback,animations:this.props.animations,reverse:this.isDirectionLeftToRight?!this.reverse:this.reverse,children:[t.cloneElement(this.getSlideToRender(),{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,flexibleBoxHeight:this.props.compProp.flexibleBoxHeight,shouldHideOverflowContent:this.props.compProp.shouldHideOverflowContent,skin:this.getSkinExports().slide.skin,styleId:this.props.styleId+"slide",parentId:this.props.id,minHeight:this.props.structure.layout.height})]},shownOnAllSlides:{children:this.getShowOnAllSlidesComponents()},navigationArrows:{"data-show-navigation-arrows":this.props.compProp.showNavigationButton,style:this.getNavigationArrowsStyle()},dotsMenuWrapper:{"data-show-navigation-dots":this.props.compProp.showNavigationDots,children:this.createDotsNavigationButtons(),style:this.getDotsNavigationWrapperStyle()},prevButton:{onClick:this.clickMoveToPreviousSlide,style:this.getArrowButtonStyle(!0)},nextButton:{onClick:this.clickMoveToNextSlide,style:this.getArrowButtonStyle(!1)}}}}}),define("stripSlideShow",["stripSlideShow/common/stripSlideShow","stripSlideShow/common/boxSlideShow","core"],function(t,e,i){var o={boxSlideShow:e,stripSlideShow:t};return i.compRegistrar.register("wysiwyg.viewer.components.BoxSlideShow",o.boxSlideShow,!0).register("wysiwyg.viewer.components.StripContainerSlideShow",o.stripSlideShow,!0),o});
//# sourceMappingURL=stripSlideShow.min.js.map