"use strict";define("quickActionBar/components/quickAction",["lodash","react"],function(i,e){return e.createClass({propTypes:{svgString:e.PropTypes.string.isRequired,fillColor:e.PropTypes.string.isRequired,backgroundColor:e.PropTypes.string.isRequired,textColor:e.PropTypes.string.isRequired,text:e.PropTypes.string.isRequired,anchorData:e.PropTypes.object,clickHandler:e.PropTypes.func,notificationCount:e.PropTypes.number},render:function(){return e.DOM.a(i.assign({},this.props.anchorData,{"data-quick-action":"action",style:{backgroundColor:this.props.backgroundColor,color:this.props.textColor},onClick:this.props.clickHandler}),[e.DOM.div({"data-quick-action":"icon",key:"icon",style:{fill:this.props.fillColor},dangerouslySetInnerHTML:{__html:this.props.svgString}},null),e.DOM.div({"data-quick-action":"text",key:"text"},this.props.text),e.DOM.div({"data-quick-action":"notifications",key:"notifications",style:{display:i.get(this.props,"notificationCount",0)>0?"initial":"none"}},null)])}})}),define("quickActionBar/utils/quickActionUtils",["lodash"],function(i){function e(e){var t=n.exec(i.trim(e));return{type:i.get(t,[1],"brand"),invert:!!i.get(t,[2])}}function t(t,n){var r=e(n),c=i.get(o,r.type);return r.invert?{fillColor:"#fff",backgroundColor:c||t,textColor:"#fff"}:{fillColor:c||t,backgroundColor:"#fff",textColor:c||o.black}}var o={black:"#1d2d3c",grey:"#808080"},n=/^(brand|grey|black)(?:\s(inv))?$/;return{resolveIconColors:t}}),define("quickActionBar/bi/events.json",[],function(){return{DYNAMIC_QUICK_ACTION_CLICK:{eventId:385,adapter:"ugc-viewer",params:{site_id:"site_id",appDefinitionId:"appDefinitionId"}}}}),define("quickActionBar/utils/quickActionBarDataRequirementsChecker",["core","lodash","utils"],function(i,e,t){function o(i,e){var t="svgshape.v2.Svg_"+e;return s.createSvgFetchRequest(i.serviceTopology.mediaRootUrl,i,t)}function n(i){var t=e.map(i.getClientSpecMap(),"appDefinitionId");return e(a).values().filter(function(i){return e.includes(t,i.appId)}).map(function(e){return o(i,e.icon)}).compact().value()}function r(i,t){return e.compact([o(i,t.data.icon)])}var c=i.dataRequirementsChecker,s=t.svg,a=t.constants.SUPPORTED_DYNAMIC_ACTIONS;c.registerCheckerForCompType("wysiwyg.viewer.components.QuickActionBarItem",r),c.registerCheckerForCompType("wysiwyg.viewer.components.QuickActionBar",n)}),define("quickActionBar/components/quickActionBar",["lodash","react","core","santaProps","quickActionBar/components/quickAction","quickActionBar/utils/quickActionUtils","quickActionBar/bi/events.json","experiment","quickActionBar/utils/quickActionBarDataRequirementsChecker"],function(i,e,t,o,n,r,c,s){var a={displayName:"QuickActionBar",mixins:[t.compMixins.skinBasedComp],propTypes:{reportBI:o.Types.reportBI.isRequired,compProp:o.Types.Component.compProp.isRequired,colorScheme:o.Types.Component.styleParam("colorScheme"),isZoomed:o.Types.mobile.isZoomed.isRequired,siteScrollingBlocker:o.Types.SiteAspects.siteScrollingBlocker.isRequired,siteWidth:o.Types.siteWidth.isRequired,dynamicActions:o.Types.QuickActions.dynamicActions.isRequired,isPreviewMode:o.Types.isPreviewMode.isRequired,componentViewMode:o.Types.RenderFlags.componentViewMode,componentPreviewState:o.Types.RenderFlags.componentPreviewState},getDefaultProps:function(){return{colorScheme:"brand inv"}},getInitialState:function(){return{isOpen:!1}},componentWillReceiveProps:function(e){!i.isEqual(this.props.componentPreviewState,e.componentPreviewState)&&("open"===e.componentPreviewState?this.openActionBar():this.closeActionBar()),!i.isEqual(this.props.componentViewMode,e.componentViewMode)&&this.closeActionBar()},isOpen:function(){return this.state.isOpen},toggleActionBar:function(){this.state.isOpen?this.closeActionBar():this.openActionBar()},openActionBar:function(){this.setState({isOpen:!0})},closeActionBar:function(){this.setState({isOpen:!1})},componentDidUpdate:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,this.isOpen())},createActionClickHandler:function(e){return i.isFunction(this.createActionClickHandlerInPreview)?this.createActionClickHandlerInPreview:function(){this.props.reportBI(c.DYNAMIC_QUICK_ACTION_CLICK,{site_id:this.props.siteId,appDefinitionId:e}),this.handleAction(e)}.bind(this)},createSingleDynamicAction:function(t){var o=r.resolveIconColors(t.color,this.props.colorScheme.trim()),c=i.assign({},i.pick(t,["text","svgString","notificationCount"]),i.pick(o,["fillColor","backgroundColor","textColor"]),{clickHandler:this.createActionClickHandler(t.appId)});return e.createElement(n,c)},createDynamicActions:function(){return"editor"!==this.props.componentViewMode?i.map(this.props.dynamicActions,this.createSingleDynamicAction):[]},getRootClasses:function(i){var e={"hide-text":this.props.compProp.hideText,closed:!this.isOpen()};return e["align-"+this.props.compProp.alignment]=!0,e["action-count-"+i]=!0,s.isOpen("sv_qabUnhide")||(e["view-mode-"+this.props.componentViewMode]=!0),e},getActions:function(){var t=e.Children.map(this.props.children,function(i){var t={colorScheme:this.props.colorScheme.trim(),closeActionBar:this.closeActionBar};return e.cloneElement(i,t)},this);return i(this.createDynamicActions()).concat(t).take(5).value()},getChildren:function(t){return i.transform(t,function(i,t,o,n){i.push(t),o<n.length-1&&i.push(e.DOM.div({"data-quick-action":"separator"}))},[])},getOverlayStyle:function(){return{width:this.props.siteWidth,left:"calc(50% - "+this.props.siteWidth/2+"px)"}},getSkinProperties:function(){var i=this.props.isZoomed()&&!this.props.isPreviewMode,e=this.getActions(),t=this.getRootClasses(e.length);return{"":{style:{display:i?"none":""},className:this.classSet(t)},overlay:{onClick:this.closeActionBar,style:this.getOverlayStyle()},controlButton:{onClick:this.toggleActionBar},actionsContainer:{children:this.getChildren(e)}}}};return t.compRegistrar.register("wysiwyg.viewer.components.QuickActionBar",a,!0),a}),define("quickActionBar/components/quickActionBarItem",["lodash","react","core","utils","santaProps","quickActionBar/components/quickAction","quickActionBar/utils/quickActionUtils"],function(i,e,t,o,n,r,c){var s=o.linkRenderer,a={displayName:"QuickActionBarItem",mixins:[t.compMixins.skinBasedComp],propTypes:{structuredAction:n.Types.QuickActions.structuredAction.isRequired,linkRenderInfo:n.Types.Link.linkRenderInfo,rootNavigationInfo:n.Types.Component.rootNavigationInfo,colorScheme:e.PropTypes.string,closeActionBar:e.PropTypes.func.isRequired},createAction:function(){var t=c.resolveIconColors(this.props.structuredAction.color,this.props.colorScheme),o=i.assign({},i.pick(this.props.structuredAction,["text","svgString"]),i.pick(t,["fillColor","backgroundColor","textColor"]),{anchorData:s.renderLink(this.props.structuredAction.link,this.props.linkRenderInfo,this.props.rootNavigationInfo),clickHandler:this.props.closeActionBar});return e.createElement(r,o)},getSkinProperties:function(){return{"":{parentConst:this.createAction}}}};return t.compRegistrar.register("wysiwyg.viewer.components.QuickActionBarItem",a,!0),a}),define("quickActionBar",["quickActionBar/components/quickActionBar","quickActionBar/components/quickActionBarItem"],function(i,e){return{quickActionBar:i,quickActionBarItem:e}});
//# sourceMappingURL=quickActionBar.min.js.map