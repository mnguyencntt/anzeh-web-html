"use strict";define("gridComponent/core/enums",[],function(){return{FieldType:Object.freeze({STRING:"string",DATE:"date",NUMBER:"number",IMAGE:"image",BOOLEAN:"bool",RICH_TEXT:"richText"}),SortDirection:Object.freeze({ASC:"asc",DESC:"desc",NONE:"none"}),UserSelectionType:Object.freeze({NONE:"none",CELL:"cell",ROW:"row"}),DataSourceType:Object.freeze({DYNAMIC:"dynamic",STATIC:"static"}),RowModification:Object.freeze({UPDATE:"update",ADD:"add",REMOVE:"remove"}),PaginationType:Object.freeze({PAGES:"pagination",SCROLL:"virtual",NONE:"normal"}),HorizontalAlignment:Object.freeze({LEFT:"left",CENTER:"center",RIGHT:"right"}),OverlayDisplayType:Object.freeze({NO_ROWS:"showNoRowsOverlay",LOADING:"showLoadingOverlay",HIDE:"hideOverlay"}),filtering:{NumericOperator:Object.freeze({EQUALS:"EQUALS",NOT_EQUALS:"NOT_EQUALS",LESS_THAN:"LESS_THAN",LESS_OR_EQUALS:"LESS_OR_EQUALS",GREATER_THAN:"GREATER_THAN",GREATER_OR_EQUALS:"GREATER_OR_EQUALS"}),StringOperator:Object.freeze({EQUALS:"EQUALS",NOT_EQUALS:"NOT_EQUALS",CONTAINS:"CONTAINS",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH"}),DateOperator:Object.freeze({LAST_X_DAYS:"LAST_X_DAYS",LAST_X_WEEKS:"LAST_X_WEEKS",LAST_X_MONTHS:"LAST_X_MONTHS"})},ColumnLayout:Object.freeze({EQUAL:"equal",FIT_CONTENT:"fitContent",MANUAL:"manual"})}}),define("gridComponent/helpers/filtering",["lodash","gridComponent/core/enums"],function(e,t){var n=t.FieldType,r=t.filtering.NumericOperator,o=t.filtering.StringOperator,i=t.filtering.DateOperator,a={},u=function(e,t){return t===e},l=function(e,t){return t!==e};a.NumericOperatorFuncs={},a.NumericOperatorFuncs[r.EQUALS]=u,a.NumericOperatorFuncs[r.NOT_EQUALS]=l,a.NumericOperatorFuncs[r.LESS_THAN]=function(e,t){return t<e},a.NumericOperatorFuncs[r.LESS_OR_EQUALS]=function(e,t){return t<=e},a.NumericOperatorFuncs[r.GREATER_THAN]=function(e,t){return t>e},a.NumericOperatorFuncs[r.GREATER_OR_EQUALS]=function(e,t){return t>=e},a.StringOperatorFuncs={},a.StringOperatorFuncs[o.EQUALS]=u,a.StringOperatorFuncs[o.NOT_EQUALS]=l,a.StringOperatorFuncs[o.CONTAINS]=function(t,n){return e.includes(n,t)},a.StringOperatorFuncs[o.STARTS_WITH]=function(t,n){return e.startsWith(n,t)},a.StringOperatorFuncs[o.ENDS_WITH]=function(t,n){return e.endsWith(n,t)};return a.DateOperatorFuncs={},a.DateOperatorFuncs[i.LAST_X_DAYS]=function(e,t){return new Date(t).getTime()>Date.now()-864e5*e},a.DateOperatorFuncs[i.LAST_X_WEEKS]=function(e,t){return new Date(t).getTime()>Date.now()-864e5*e*7},a.DateOperatorFuncs[i.LAST_X_MONTHS]=function(e,t){var n=new Date,r=new Date(t);return 12*r.getYear()+r.getMonth()>n.getMonth()+12*n.getYear()-e},a.OperatorFuncs={},a.OperatorFuncs[n.NUMBER]=a.NumericOperatorFuncs,a.OperatorFuncs[n.STRING]=a.StringOperatorFuncs,a.OperatorFuncs[n.DATE]=a.DateOperatorFuncs,a.buildFilter=function(t){return function(n){return e.every(t,function(e,t){return a.OperatorFuncs[e.type][e.operator](e.value,n[t])})}},a}),define("gridComponent/wrappers/dataSource",["lodash","gridComponent/core/enums","gridComponent/helpers/filtering"],function(e,t,n){function r(t,r){return e.every(t.compProp.filter,function(o,i){var a=e.find(t.compProp.columns,{id:i});if(e.isUndefined(a))return!0;var u=e.get(r,a.dataPath);return n.OperatorFuncs[o.type][o.operator](o.value,u)})}function o(n,o,i,a){var u;return u=a===t.DataSourceType.DYNAMIC?e.partial(i.dynamic(n,o.dataFetchContext)):e.partial(i.static(n,e.partial(r,n))),{rowCount:-1,getRows:u}}return o}),define("gridComponent/core/state",["lodash","gridComponent/helpers/filtering","gridComponent/core/enums"],function(e,t,n){function r(t,n){var r=t;return e.isUndefined(n)||(r=e.filter(t,n)),{rows:r,rowsCount:r.length}}function o(){return{dataFetchContext:null,dataFetchHandler:null,uiState:null,agGridApi:null,currentPage:void 0}}return o.setGrid=function(e,t,n,r){return o.destroyGrid(e),new t.Grid(r,n),e.agGridApi=n.api,e},o.destroyGrid=function(e){return null!==e.agGridApi&&(e.agGridApi.destroy(),e.agGridApi=null),e},o.setDataSource=function(e,t){return e.agGridApi.setDatasource(t),e},o.setRowData=function(e,n,o){var i=r(n,t.buildFilter(o));return e.agGridApi.setRowData(i.rows),e},o.updateUsingApi=function(t,n){return e.forEach(n,function(e,n){t.agGridApi[n].apply(t.agGridApi,e)}),t},o.displayOverlay=function(e,t){return e.agGridApi[t](),e},o.setDataFetchHandler=function(e,t){return e.dataFetchHandler=t,e},o.handleFetchedData=function(t,n){if(null!==t.dataFetchHandler){var o=e.clone(n),i=t.dataFetchHandler;e.has(i,"startRow")&&((o=r(n.rows,i.filter)).rows=e.slice(o.rows,i.startRow,i.endRow)),i.successCallback(o.rows,o.rowsCount),t.dataFetchHandler=null}return t},o.updateUIState=function(e,t,n){return null===e.uiState&&(e.uiState={}),e.uiState[n]=t,e},o.restoreUIState=function(e,t){return o.updateUsingApi(e,t)},o.saveCurrentPage=function(e){return e.currentPage=e.agGridApi.paginationController.currentPage,e},o.setCurrentPage=function(e,t){return e.agGridApi.paginationController.currentPage=t,e.agGridApi.paginationController.loadPage(),e},o.restoreCurrentPage=function(t){return e.isUndefined(t.currentPage)?t:o.setCurrentPage(t,t.currentPage)},o.isInCurrentPage=function(e,t,r){var o=t.compData.rows.length;if(t.compProp.pagination.type!==n.PaginationType.PAGES&&r<=o)return!0;var i,a=t.compProp.pagination.rowsPerPage,u=e.agGridApi.paginationController.currentPage,l=a*u;return i=t.compProp.dataSource.type===n.DataSourceType.STATIC?o:a*u+o,l<=r&&r<i},o}),define("gridComponent/wrappers/gridOptions",["gridComponent/core/enums"],function(e){function t(n,r,o){var i=null!==o.dataFetchContext,a=n.compProp,u={rowBuffer:0,rowHeight:t.getRowHeight(n),paginationOverflowSize:0,paginationPageSize:a.pagination.rowsPerPage,enableSorting:!1,enableFilter:!1,suppressMovableColumns:!0,rowSelection:t.getRowSelection(a),suppressCellSelection:t.isCellSelectionSuppressed(a),enableServerSideSorting:i,enableServerSideFilter:i,onSortChanged:r.onSortChanged,onFilterChanged:r.onUoUFiltersChanged,onCellValueChanged:r.onCellEdit,onRowSelected:r.onRowSelect,onCellFocused:r.onCellSelect,rowData:null};return a.pagination.type!==e.PaginationType.NONE&&(u.rowModelType=a.pagination.type),u}var n=e.UserSelectionType;return t.isCellSelectionSuppressed=function(e){return e.userSelectionType!==n.CELL},t.getRowHeight=function(e){return e.compProp.rowHeight+(Number(e.compTheme.style.properties.rowDivider_w)||0)},t.getRowSelection=function(e){if(e.userSelectionType===n.ROW)return"single"},t}),define("gridComponent/helpers/either",["lodash"],function(e){var t={Left:function(e){return{left:e}},Right:function(e){return{right:e}},isRight:e.partialRight(e.has,"right"),get:e.partialRight(e.get,"right"),getOrElse:function(e,n){return t.isRight(e)?t.get(e):n}};return t}),define("gridComponent/wrappers/newValueHandler",["lodash","gridComponent/helpers/either","gridComponent/core/enums"],function(e,t,n){var r=n.FieldType,o=t.Left,i=t.Right,a={validatorByFieldType:{}};return a.validatorByFieldType[r.DATE]=function(t){return e.isNaN(Date.parse(t))?o(null):i(new Date(t))},a.validatorByFieldType[r.NUMBER]=function(t){var n=Number(t);return e.isNaN(n)?o(null):i(n)},a.getNextValue=function(n,r,o){var i=r;return e.has(a.validatorByFieldType,n)&&(i=t.getOrElse(a.validatorByFieldType[n](r),o)),i},a.update=function(t,n){var r=a.getNextValue(t.type,n.newValue,n.oldValue);e.set(n.data,t.dataPath,r)},a}),define("gridComponent/wrappers/dateFilter",["lodash","gridComponent/core/enums"],function(e,t){function n(){}var r=t.filtering.DateOperator,o=t.filtering.DateOperatorFuncs;return n.prototype.init=function(t){this.eGui=window.document.createElement("div"),this.eGui.innerHTML='<div><select class="date-filter-select ag-filter-select">'+e.map(r,function(e,t){return'<option value="'+t+'">'+e+"</option>"}).join("")+'</select></div><div><input type="number" class="date-filter-amount ag-filter-filter" min="0" placeholder="Filter..." /></div>',this.select=this.eGui.querySelector(".date-filter-select"),this.input=this.eGui.querySelector(".date-filter-amount"),this.select.addEventListener("change",t.filterChangedCallback),this.input.addEventListener("change",t.filterChangedCallback)},n.prototype.getGui=function(){return this.eGui},n.prototype.doesFilterPass=function(t){var n=Number(this.input.value)||0,r=this.select.value;return!!e.isUndefined(o[r])||o[r](n,t.data.date)},n.prototype.isFilterActive=function(){return this.select.value!==r.NONE},n.prototype.getApi=function(){return{getModel:function(){return{type:t.FieldType.DATE,operator:this.select.value,value:Number(this.input.value)}}.bind(this),setModel:function(n){e.isUndefined(n)&&(n={type:t.FieldType.DATE,operator:r.NONE,value:""}),this.select.value=n.operator,this.input.value=n.value}.bind(this)}},n}),define("gridComponent/wrappers/cellRenderers",["lodash","utils","gridComponent/core/enums"],function(e,t,n){function r(e,t,n,r){if(/^image:\/\//.test(t)){var o=/^image:\/\/([^\/]*)\/([^\/]*)\/([^\/]*)\/([^\/]*)/,i=t.match(o),a=i[1],u=i[2];return e(u)+"/"+a+"/fit/w_"+n+",h_"+r+"/"+u}return t}function o(e,t){var n=e.compProp.columns,r=t.column.colId,o=window.document.createElement("div");return o.classList.add("cell-content-wrapper"),p(n,r)?o.classList.add("first-column"):d(n,r)&&o.classList.add("last-column"),o}function i(){var e=window.document.createElement("div");return e.classList.add("ag-cell-text"),e}function a(t,n,r){var o=window.document.createElement("a"),i=s.renderLink(t.value.link,n,r);return e.assign(o,i),o.classList.add("ag-cell-link"),o}function u(e,t,n){return(m.byFieldType[e]||m.valueRenderer)(t,n)}function l(e){return e!==f.IMAGE}function p(e,t){return e[0].id===t}function d(e,t){return e[e.length-1].id===t}function c(t,n){return!(e.isUndefined(t.linkPath)||e.isEmpty(n.value.link))}var s=t.linkRenderer,g=t.dateTimeUtils,f=n.FieldType,m={byFieldType:{}};return m.byFieldType[f.IMAGE]=function(t,n){var o=t.getMediaFullStaticUrl,i=Math.floor(n.column.actualWidth),a=n.node.rowHeight,u=r(o,n.value.data,i,a),l=window.document.createElement("img");return l.classList.add("ag-cell-image"),e.isNull(u)||(l.src=u),l},m.byFieldType[f.DATE]=function(e,t){var n=e.compProp.dateFormat,r=new Date(t.value.data),o=g.dateFormat(r,n);return window.document.createTextNode(o)},m.byFieldType[f.BOOLEAN]=function(e,t){var n=t.value.data?"Yes":"No";return window.document.createTextNode(n)},m.byFieldType[f.RICH_TEXT]=function(e,t){var n=window.document.createElement("div");return n.classList.add("ag-cell-richtext"),n.innerHTML=t.value.data,n},m.valueRenderer=function(t,n){var r=e.get(n,"value.data");return window.document.createTextNode(r)},m.render=e.curry(function(t,n,r){if(e.isUndefined(r.value.data))return"";var p,d;if(d=p=o(t,r),c(n,r)){var s=a(r,t.linkRenderInfo,t.rootNavigationInfo);p.appendChild(s),p=s}else if(l(n.type)){var g=window.document.createElement("div");g.classList.add("cell-text-wrapper");var f=i();g.appendChild(f),p.appendChild(g),p=f}var m=u(n.type,t,r);return p.appendChild(m),d}),m}),define("gridComponent/wrappers/columnDefinition",["lodash","gridComponent/core/enums","gridComponent/wrappers/newValueHandler","gridComponent/wrappers/dateFilter","gridComponent/wrappers/cellRenderers"],function(e,t,n,r,o){function i(t,r){var a=r.type,u=i.byFieldType[a],l=e.assign({colId:r.id,field:r.id,headerName:r.label,width:i.getColumnWidth(t,r),hide:!r.visible,valueGetter:i.getValueGetter(r),newValueHandler:e.partial(n.update,r),cellRenderer:o.render(t,r),editable:i.getEditable(t.compProp,u)},u);return t.isExperimentOpen("sv_gridUoUEdit")||e.assign(l,{editable:!1}),l}function a(e,t){return new Date(e)-new Date(t)}var u=t.FieldType;return i.getValueGetter=function(t){return function(n){return{data:e.get(n.data,t.dataPath),link:e.get(n.data,t.linkPath+"_linkObj"),toString:function(){return this.data.toString()}}}},i.getEditable=function(t,n){return t.allowUserEditing&&!e.isUndefined(n)&&n.editable},i.getColumnWidth=function(n,r){switch(n.compProp.columnLayout){case t.ColumnLayout.EQUAL:return 0===n.compProp.columns.length?0:e.get(n,"structure.layout.width")/n.compProp.columns.length;default:return r.width}},i.byFieldType={},i.byFieldType[u.STRING]={filter:"text",editable:!0},i.byFieldType[u.NUMBER]={filter:"number",editable:!0},i.byFieldType[u.DATE]={filter:r,comparator:a,editable:!0},i}),define("gridComponent/apiCallMaps/selectionCallMap",["lodash","gridComponent/core/enums"],function(e,t){function n(n){return e.has(n,"columnId")?t.UserSelectionType.CELL:t.UserSelectionType.ROWS}function r(e,t){Number(t.id)===e&&t.setSelected(!0,!0)}function o(t){return{forEachNode:[e.partial(r,t)]}}function i(e,t,n){var r=Number(n.id),o=e%t,i=r%t,a=r-i<=e&&r-i+t>e;n.childIndex===o&&a&&n.setSelected(!0,!0)}function a(t,n){return{forEachNodeAfterFilterAndSort:[e.partial(i,t,n.rowsPerPage)]}}function u(e){return{setFocusedCell:[e.rowIndex,e.columnId]}}function l(e,r){return n(e)===t.UserSelectionType.CELL?u(e):p[r.type](Number(e.rowIndex),r)}var p={};return p[t.PaginationType.NONE]=a,p[t.PaginationType.PAGES]=a,p[t.PaginationType.SCROLL]=o,Object.freeze(p),l}),define("gridComponent/apiCallMaps/updateApiCallMap",["lodash","gridComponent/wrappers/columnDefinition","gridComponent/apiCallMaps/selectionCallMap"],function(e,t,n){function r(n,r){return e.map(n,e.partial(t,r))}function o(e,t){return e?t.compProp.headerHeight:0}function i(t,n){return e.reduce(i.propertyUpdateOrder,function(r,o){return e.has(t,o)&&e.assign(r,i.propertyToCall[o](t[o],n)),r},{})}return i.invoke=function(e){return function(t){var n={};return n[e]=[t],n}},i.propertyUpdateOrder=["columns","headerHeight","sorting","userSelection","showHeader"],i.propertyToCall={columns:e.flow(r,i.invoke("setColumnDefs")),headerHeight:i.invoke("setHeaderHeight"),showHeader:e.flow(o,i.invoke("setHeaderHeight")),sorting:i.invoke("setSortModel"),userSelection:function(e,t){return n(e,t.compProp.pagination)}},i}),define("gridComponent/apiCallMaps/uiStateApiCallMap",["lodash","gridComponent/apiCallMaps/selectionCallMap"],function(e,t){function n(t,r){var o=n.callByProperty(r);return e.reduce(t,function(t,n,r){return e.assign(t,o[r](n))},{})}return n.callByProperty=function(e){return{userFilter:function(e){return{setFilterModel:[e]}},userSelection:function(n){return t(n,e.pagination)}}},n.uiProperties=["userFilter","userSelection"],n.getUIStateProps=function(t){return e.pick(t,n.uiProperties)},n}),define("gridComponent/apiCallMaps/rowModificationCallMap",["lodash","gridComponent/core/enums"],function(e,t){function n(e){return{forEachNode:[function(t){Number(e.index)===Number(t.id)&&t.setData(e.data)}]}}var r={};return r[t.RowModification.UPDATE]=n,Object.freeze(r),function(e){return r[e.op](e)}}),define("gridComponent/core/actions",["lodash","gridComponent/wrappers/dataSource","gridComponent/core/state","gridComponent/wrappers/gridOptions","gridComponent/apiCallMaps/updateApiCallMap","gridComponent/apiCallMaps/uiStateApiCallMap","gridComponent/apiCallMaps/rowModificationCallMap","gridComponent/core/enums"],function(e,t,n,r,o,i,a,u){var l=u.UserSelectionType;return{INIT:n,CREATE_GRID:function(e,t,o,i){return function(a){var u=r(t,o,a);return n.setGrid(a,e,u,i)}},UPDATE_GRID_USING_API:e.flow(o,e.curryRight(n.updateUsingApi)),DESTROY_GRID:n.destroyGrid,SET_DATA_FETCH_HANDLER:function(e){return function(t){return t=n.setDataFetchHandler(t,e),n.displayOverlay(t,u.OverlayDisplayType.LOADING)}},HANDLE_FETCHED_DATA:function(e){return function(t){return t=n.handleFetchedData(t,e),n.displayOverlay(t,u.OverlayDisplayType.HIDE)}},SET_DATA:function(e,r,o){return function(i){if(e.compProp.pagination.type===u.PaginationType.NONE)return n.setRowData(i,e.compData.rows,e.compProp.filter);var a=t(e,i,r,o);return n.setDataSource(i,a)}},UPDATE_UI_STATE:function(t){return e.partial(e.reduce,i.getUIStateProps(t),n.updateUIState)},RESTORE_UI_STATE:function(e){return function(t){var r=i(t.uiState,e);return n.restoreUIState(t,r)}},SAVE_CURRENT_PAGE:n.saveCurrentPage,RESTORE_CURRENT_PAGE:n.restoreCurrentPage,SET_CURRENT_PAGE:e.curryRight(n.setCurrentPage),CLEAR_SELECTION:function(e){return function(t){return e===l.CELL?n.updateUsingApi(t,{setFocusedCell:[-1,-1]}):e===l.ROW?n.updateUsingApi(t,{deselectAll:[]}):n.updateUsingApi(t,{setFocusedCell:[-1,-1],deselectAll:[]})}},MODIFY_ROW:function(e,t){return function(r){return n.isInCurrentPage(r,e,t.index)?n.updateUsingApi(r,a(t)):r}}}}),define("gridComponent/core/propsInspector",["lodash","gridComponent/apiCallMaps/updateApiCallMap","gridComponent/apiCallMaps/uiStateApiCallMap","gridComponent/core/enums"],function(e,t,n,r){function o(e,t){return t.compProp.columnLayout===r.ColumnLayout.EQUAL}function i(e,t){return t.compTheme.style.properties[u]!==e.compTheme.style.properties[u]}function a(t,n){var r=e(n.compProp).pick(a.agGridAffectingProps).reduce(function(n,r,o){return e.isEqual(r,t.compProp[o])||(n[o]=r),n},{});return r=e.reduce(a.propChangeTests,function(r,o){if(o.test(t,n)){var i={};i[o.mappedProp]=n.compProp[o.mappedProp],e.assign(r,i)}return r},r),{props:r,dataChanged:t.compData.revision!==n.compData.revision}}var u="rowDivider_w";return a.propChangeTests=[{test:o,mappedProp:"columns"},{test:i,mappedProp:"rowHeight"}],a.agGridAffectingProps=["allowUserEditing","allowUserFiltering","allowUserSorting","cellPadding","columnLayout","columns","dataSource","dateFormat","headerHeight","heightLayout","horizontalAlignment","linkTarget","pagination","rowHeight","showHeader","userFilter","userSelection","userSelectionType"],a.apiProperties=t.propertyUpdateOrder,a.hasOnlyApiProps=function(t){return e(t.props).keys().difference(a.apiProperties).isEmpty()},a.didDataSourceChange=function(t){return e.has(t.props,"dataSource")||e.has(t.props,"pagination")},a.didDataChange=function(e){return e.dataChanged},a.didUIPropsChange=function(t){return!e(t.props).keys().intersection(n.uiProperties).isEmpty()},a.isEmpty=function(t){return e.isEmpty(t.props)&&!t.dataChanged},a.hasPagesPagination=function(e){return e.compProp.pagination.type===r.PaginationType.PAGES},a}),define("gridComponent/helpers/filterModelConverter",["lodash","gridComponent/core/enums"],function(e,t){var n=t.FieldType,r=t.filtering.NumericOperator,o=t.filtering.StringOperator,i={convert:function(t,n){return e.mapValues(t,function(t,r){var o=e.find(n,{id:r}).type;return e.has(i.operatorMap,o)?{type:o,operator:i.operatorMap[o][t.type],value:t.filter}:t})}};return i.operatorMap={},i.operatorMap[n.NUMBER]={1:r.EQUALS,2:r.NOT_EQUALS,3:r.LESS_THAN,4:r.LESS_OR_EQUALS,5:r.GREATER_THAN,6:r.GREATER_OR_EQUALS},i.operatorMap[n.STRING]={1:o.CONTAINS,2:o.EQUALS,3:o.NOT_EQUALS,4:o.STARTS_WITH,5:o.ENDS_WITH},i}),define("gridComponent/helpers/rowHelpers",["lodash"],function(e){return{createRow:function(t,n,r,o){var i={};return e.forEach(t,function(t){var a=e.get(n,t.dataPath);o&&t.id===r&&(a=o),e.set(i,t.dataPath,a)}),i},getRowIndex:function(t,n){return e.findIndex(t.compData.rows,n)}}}),define("gridComponent/helpers/boolSet",["lodash"],function(e){var t=e.flow(e.partialRight(e.chunk,2),e.partialRight(e.filter,e.last),e.partialRight(e.map,e.head));return Object.freeze(t),t}),define("gridComponent/core/grid",["lodash","bluebird","gridComponent/core/actions","gridComponent/core/propsInspector","gridComponent/helpers/filterModelConverter","gridComponent/helpers/rowHelpers","gridComponent/core/enums","gridComponent/helpers/boolSet"],function(e,t,n,r,o,i,a,u){function l(e){return{state:null,foreign:e}}var p=a.UserSelectionType;l.mutateState=function(t,n){t.state=e.reduce(n,function(e,t){return t(e)},t.state)},l.loadAgGridModule=null,l.ensureAgGridModule=function(n){null===l.loadAgGridModule&&(l.loadAgGridModule=new t(e.partial(requirejs,["ag-grid"]))),l.loadAgGridModule.then(n)},l.init=function(e,t,r){l.ensureAgGridModule(function(o){var i=[n.INIT,n.CREATE_GRID(o,t,l.bindGridEventHandlers(e,t),r),n.UPDATE_GRID_USING_API(t.compProp,t),n.SET_DATA(t,l.bindRowGetters(e),t.compProp.dataSource.type)];l.mutateState(e,i)})},l.update=function(e,t,o,i){l.ensureAgGridModule(function(a){var p=r(t,o);if(!r.isEmpty(p)){var d=r.hasOnlyApiProps(p),c=r.hasPagesPagination(t)&&r.hasPagesPagination(o),s=r.didDataSourceChange(p),g=r.didDataChange(p),f=r.didUIPropsChange(p),m=d?p.props:o.compProp,h=u([n.SAVE_CURRENT_PAGE,!d&&c,n.CREATE_GRID(a,o,l.bindGridEventHandlers(e,o),i),!d,n.UPDATE_GRID_USING_API(m,o),!0,n.SET_DATA(o,l.bindRowGetters(e),o.compProp.dataSource.type),s||!d,n.HANDLE_FETCHED_DATA({rows:o.compData.rows,rowsCount:o.compData.rowsCount}),!s&&g,n.RESTORE_CURRENT_PAGE,!d&&c,n.UPDATE_UI_STATE(p.props),f,n.RESTORE_UI_STATE(o.compProp),!f]);l.mutateState(e,h),g&&e.foreign.handleAction("dataChange")}})},l.destroy=function(t){e.isNull(t.state)||l.mutateState(t,[n.DESTROY_GRID])},l.modifyRow=function(e,t,r){l.mutateState(e,[n.MODIFY_ROW(t,r)])};var d={EDITOR:"editor",PREVIEW:"preview"};return l.handleViewModeChange=function(e,t,o){var i=r.hasPagesPagination(t);o===d.EDITOR&&l.mutateState(e,u([n.CLEAR_SELECTION(),!0,n.SET_CURRENT_PAGE(0),i]))},l.bindRowGetters=function(e){return{static:function(t,r){return function(o){l.mutateState(e,[n.SET_DATA_FETCH_HANDLER({successCallback:o.successCallback,startRow:o.startRow,endRow:o.endRow,filter:r}),n.HANDLE_FETCHED_DATA({rows:t.compData.rows})])}},dynamic:function(t){return function(r){l.mutateState(e,[n.SET_DATA_FETCH_HANDLER({successCallback:r.successCallback})]);var i=o.convert(r.filterModel,t.compProp.columns),a={name:"fetchData",id:t.id,startRow:r.startRow,endRow:r.endRow,sorting:r.sortModel,filter:i};e.foreign.handleAction("fetchData",a)}}}},l.bindGridEventHandlers=function(t,r){return{onSortChanged:function(){if(null!==t.state){var e=t.state.agGridApi.getSortModel();t.foreign.updateProps({sorting:e})}},onUoUFiltersChanged:function(){var e=t.state.agGridApi.getFilterModel();l.mutateState(t,[n.UPDATE_UI_STATE({userFilter:e})])},onRowSelect:function(o){if(o.node.selected){var i=o.node.childIndex||Number(o.node.id),a=e.map(r.compProp.columns,"dataPath"),u=e.pick(o.node.data,a),d={rowIndex:i,rowData:JSON.stringify(u)};l.mutateState(t,[n.UPDATE_UI_STATE({userSelection:d}),n.CLEAR_SELECTION(p.CELL)]),t.foreign.handleAction("rowSelect",d)}},onCellSelect:function(r){if(r.column){var o=e.find(this.api.getRenderedNodes(),{id:r.rowIndex.toString()}),i=this.api.getValue(r.column.colId,o),a={rowIndex:r.rowIndex,columnId:r.column.colId,cellData:JSON.stringify(i)};l.mutateState(t,[n.UPDATE_UI_STATE({userSelection:a}),n.CLEAR_SELECTION(p.ROW)]),t.foreign.handleAction("cellSelect",a)}},onCellEdit:function(n){var o=i.createRow(r.compProp.columns,n.data,n.colDef.colId,n.oldValue),a=i.createRow(r.compProp.columns,n.data,n.colDef.colId,n.newValue),u=i.getRowIndex(r,o),l=e.map(r.compData.rows,function(e,t){return t===u?a:e});t.foreign.updateData({rows:l}),t.foreign.handleAction("cellEdit",{cellData:n.newValue,rowIndex:u,columnId:n.colDef.colId})}}},l}),define("gridComponent",["lodash","core","santaProps","gridComponent/core/grid","gridComponent/core/enums"],function(e,t,n,r,o){var i={displayName:"Grid",mixins:[t.compMixins.skinBasedComp,t.compMixins.runTimeCompData],propTypes:{compData:n.Types.Component.compData.isRequired,compProp:n.Types.Component.compProp.isRequired,compTheme:n.Types.Component.theme.isRequired,linkRenderInfo:n.Types.Link.linkRenderInfo,isViewerMode:n.Types.isViewerMode,getMediaFullStaticUrl:n.Types.ServiceTopology.getMediaFullStaticUrl,componentViewMode:n.Types.RenderFlags.componentViewMode,isExperimentOpen:n.Types.isExperimentOpen},statics:{useSantaTypes:!0,behaviors:{modifyRow:{methodName:"modifyRow",params:["rowDataDelta"]}}},modifyRow:function(e){r.modifyRow(this.grid,this.props,e)},getClasses:function(e){var t={};return t["ag-fresh"]=!0,t["hide-pagination-panel"]=0===e.compData.rows.length,t["align-text-left"]=e.compProp.horizontalAlignment===o.HorizontalAlignment.LEFT,t["align-text-right"]=e.compProp.horizontalAlignment===o.HorizontalAlignment.RIGHT,t["align-text-center"]=e.compProp.horizontalAlignment===o.HorizontalAlignment.CENTER,t["disable-horizontal-scroll"]=e.compProp.columnLayout===o.ColumnLayout.EQUAL,t["select-rows"]=e.compProp.userSelectionType===o.UserSelectionType.ROW,t["select-cells"]=e.compProp.userSelectionType===o.UserSelectionType.CELL,t["hide-header"]=!e.compProp.showHeader,t},componentDidMount:function(){this.grid=r(this),this.transformedProps=e.isFunction(this.transformPropsWithPreviewDummyData)?this.transformPropsWithPreviewDummyData(this.props):this.props,r.init(this.grid,this.transformedProps,this.refs.grid)},componentWillReceiveProps:function(t){var n=t.componentViewMode!==this.props.componentViewMode,o=e.isFunction(this.transformPropsWithIncompleteData)?this.transformPropsWithIncompleteData(t,n):t;n&&r.handleViewModeChange(this.grid,o,this.props.componentViewMode),r.update(this.grid,this.transformedProps,o,this.refs.grid,this.props.componentViewMode),this.transformedProps=o},getSkinProperties:function(){var t=this.getClasses(this.transformedProps||this.props);return{"":{className:e.reduce(t,function(e,t,n){return t&&(e+=" "+n),e},"")}}},componentWillUnmount:function(){r.destroy(this.grid)}};return t.compRegistrar.register("wysiwyg.viewer.components.Grid",i,!0),i});
//# sourceMappingURL=gridComponent.min.js.map