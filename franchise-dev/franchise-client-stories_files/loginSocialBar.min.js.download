"use strict";define("loginSocialBar/components/loginSocialBar",["react","lodash","core","santaProps","utils"],function(e,t,i,n,o){function r(e){return e.loggedInMember===g.AVATAR||e.loggedInMember===g.BOTH}function s(e){return e.loggedInMember===g.TEXT||e.loggedInMember===g.BOTH}function p(e){return t.isArray(e.iconItems)&&e.iconItems.length>0}function l(e){return{isLoggedIn:e.isLoggedIn,$loggedIn:e.isLoggedIn?"loggedIn":"loggedOut",$direction:"rtl"===e.compProp.buttonsDirection?"rtl":"ltr",$dropdownDirection:"right"===e.compProp.dropDownTextAlignment?"right":"left",$iconsOnly:e.compData.loggedInMember,$noButtons:p(e)?"buttons":"noButtons"}}function a(e){switch(e.compProp.dropDownTextAlignment){case"left":return"rtl"===e.compProp.buttonsDirection?"row-reverse":"row";case"right":return"rtl"===e.compProp.buttonsDirection?"row":"row-reverse";default:return"row"}}function c(e){switch(e.compProp.buttonsAlignment){case"left":return"rtl"===e.compProp.buttonsDirection?"flex-end":"flex-start";case"right":return"rtl"===e.compProp.buttonsDirection?"flex-start":"flex-end";case"center":return"center";default:return"flex-end"}}var u=o.linkRenderer,g={AVATAR:"avatarOnly",TEXT:"textOnly",BOTH:"avatarAndText"},m={LOGGED_IN:"loggedIn",LOGGED_IN_MENU_OPENED:"loggedInMenuOpened",LOGGED_OUT:"loggedOut"};return{displayName:"loginSocialBar",mixins:[i.compMixins.skinBasedComp],propTypes:{compData:n.Types.Component.compData.isRequired,compProp:n.Types.Component.compProp.isRequired,isMobileView:n.Types.isMobileView.isRequired,rootNavigationInfo:n.Types.Component.rootNavigationInfo.isRequired,linkRenderInfo:n.Types.Link.linkRenderInfo.isRequired,componentPreviewState:n.Types.RenderFlags.componentPreviewState,componentViewMode:n.Types.RenderFlags.componentViewMode,logout:n.Types.SiteMembersSantaTypes.logout.isRequired,showAuthenticationDialog:n.Types.SiteMembersSantaTypes.showAuthenticationDialog.isRequired,serviceTopology:n.Types.ServiceTopology.serviceTopology.isRequired,isLoggedIn:n.Types.MemberLogin.isLoggedIn.isRequired,language:n.Types.MemberLogin.language.isRequired,memberName:n.Types.MemberLogin.memberName.isRequired,memberAvatar:n.Types.MemberLogin.memberAvatar.isRequired,menuItems:n.Types.MemberLogin.menuItems,iconItems:n.Types.MemberLogin.iconItems},statics:{useSantaTypes:!0},getInitialState:function(){return t.assign(l(this.props),{isMenuOpen:!1})},createLoginSocialButtonComponent:function(e,i){return this.createChildComponent(this.props.compData,"wysiwyg.viewer.components.LoginSocialButton","button",t.assign(e,{ref:"button"+i,id:this.props.id+"button"+i,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize,marginRight:"rtl"===this.props.compProp.buttonsDirection?"auto":12,marginLeft:"rtl"===this.props.compProp.buttonsDirection?12:"auto"},linkRenderInfo:this.props.linkRenderInfo,rootNavigationInfo:this.props.rootNavigationInfo,iconSize:this.props.compProp.iconSize,buttonsDirection:this.props.compProp.buttonsDirection}))},getButtonsToRender:function(){return p(this.props)?t.map(this.props.iconItems,this.createLoginSocialButtonComponent):null},onUserClick:function(){this.registerReLayout(),this.setState({isMenuOpen:!this.state.isMenuOpen})},onLogout:function(){if(this.getLogoutFunction){var e=this.getLogoutFunction(this.props).call(this);t.isFunction(e)&&e.call(this)}else this.setState({isMenuOpen:!1}),this.props.logout(this.props.language)},getMenuItems:function(){var i=t.filter(this.props.menuItems,this.props.isMobileView?"isVisibleMobile":"isVisible"),n=t.concat(i||[],{label:this.props.compData.logOutText||"Log Out",onClick:this.onLogout}),o=a(this.props),r=n.length-2,s=n.length-1;return t.map(n,function(i,n){var p={};return i.link&&(p=u.renderLink(i.link,this.props.linkRenderInfo,this.props.rootNavigationInfo)),0===n&&(p["data-preview"]=this.props.componentPreviewState),e.DOM.li({key:"item"+n,children:[e.DOM.a(t.assign({children:[e.DOM.div({children:i.label}),t.isNil(i.displayCount)?null:e.DOM.div({children:i.displayCount})],style:{flexDirection:o,paddingTop:0===n?11:"initial",paddingBottom:n===s?11:"initial"}},p)),n===r?e.DOM.hr():null],onClick:i.onClick||null})}.bind(this))},componentWillReceiveProps:function(e){var i=l(e);t.isEqual(this.props.componentPreviewState,e.componentPreviewState)?t.isEqual(this.props.componentViewMode,e.componentViewMode)||(i.isMenuOpen=!1):t.includes(e.componentPreviewState,m.LOGGED_IN_MENU_OPENED)?i.isMenuOpen=!0:(!e.componentPreviewState||t.includes(e.componentPreviewState,m.LOGGED_IN)||t.includes(e.componentPreviewState,m.LOGGED_OUT))&&(i.isMenuOpen=!1),t.isMatch(this.state,i)||this.setState(i)},onLoginButtonClick:function(){this.setState({isMenuOpen:!1}),this.props.showAuthenticationDialog({language:this.props.language,appId:3})},renderMemberAvatar:function(){return e.DOM.img({src:this.props.memberAvatar,style:{width:this.props.compProp.iconSize,height:this.props.compProp.iconSize}})},getSkinProperties:function(){var i={"":{style:{direction:this.props.compProp.buttonsDirection||"ltr",justifyContent:c(this.props)}}};return this.state.isLoggedIn?t.assign(i,{buttons:{children:this.getButtonsToRender(),style:{display:p(this.props)?null:"none"}},user:{onClick:this.onUserClick,"data-preview":this.props.componentPreviewState},icon:{children:this.renderMemberAvatar(),style:{display:r(this.props.compData)?null:"none"}},text:{children:this.props.memberName,style:{display:s(this.props.compData)?null:"none"}},dropdownMenu:{children:e.DOM.ul({children:this.getMenuItems()}),style:{display:this.state.isMenuOpen?null:"none"}}}):t.assign(i,{login:{children:[this.renderMemberAvatar(),this.props.compData.loggedOutText||"Login | Sign up"],onClick:this.onLoginButtonClick,"data-preview":this.props.componentPreviewState}}),i},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialBarSkin"}}}),define("loginSocialBar/components/loginSocialButton",["react","lodash","core","utils"],function(e,t,i,n){var o=n.linkRenderer;return{displayName:"loginSocialButton",mixins:[i.compMixins.skinBasedComp],propTypes:{label:e.PropTypes.string,icon:e.PropTypes.string,link:e.PropTypes.object,counter:e.PropTypes.number,buttonsDirection:e.PropTypes.string},statics:{useSantaTypes:!0},getInitialState:function(){return{$direction:"rtl"===this.props.buttonsDirection?"rtl":"ltr"}},onButtonClick:function(){this.props.onClick&&this.props.onClick()},createBadge:function(){var i=null,n=this.props.iconSize/2;return t.isNumber(this.props.displayCount)&&this.props.displayCount>0&&(i=e.DOM.div({children:this.props.displayCount,style:{width:n,height:n,lineHeight:n+"px"}})),i},getSkinProperties:function(){return{"":{onClick:this.onButtonClick},link:this.props.link?o.renderLink(this.props.link,this.props.linkRenderInfo,this.props.rootNavigationInfo):null,img:e.DOM.img({src:this.props.icon,style:this.props.style}),badge:{children:this.createBadge()}}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.LoginSocialButtonSkin"}}}),define("loginSocialBar",["loginSocialBar/components/loginSocialBar","loginSocialBar/components/loginSocialButton","core"],function(e,t,i){var n={loginSocialBar:e,loginSocialButton:t};return i.compRegistrar.register("wysiwyg.viewer.components.LoginSocialBar",n.loginSocialBar,!0).register("wysiwyg.viewer.components.LoginSocialButton",n.loginSocialButton,!0),n});
//# sourceMappingURL=loginSocialBar.min.js.map